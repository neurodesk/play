<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://neurodesk.github.io/pr-621/developers/architecture/><link rel=alternate type=application/rss+xml href=https://neurodesk.github.io/pr-621/developers/architecture/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=https://neurodesk.github.io/pr-621/static/favicons/favicon.ico><link rel=apple-touch-icon href=https://neurodesk.github.io/pr-621/static/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://neurodesk.github.io/pr-621/static/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://neurodesk.github.io/pr-621/static/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://neurodesk.github.io/pr-621/static/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://neurodesk.github.io/pr-621/static/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://neurodesk.github.io/pr-621/static/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://neurodesk.github.io/pr-621/static/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://neurodesk.github.io/pr-621/static/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://neurodesk.github.io/pr-621/static/favicons/android-192x192.png sizes=192x192><title>Architecture | Neurodesk</title>
<meta name=description content="The architecture of the Neurodesk ecosystem"><meta property="og:url" content="https://neurodesk.github.io/pr-621/developers/architecture/"><meta property="og:site_name" content="Neurodesk"><meta property="og:title" content="Architecture"><meta property="og:description" content="The architecture of the Neurodesk ecosystem"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Architecture"><meta itemprop=description content="The architecture of the Neurodesk ecosystem"><meta itemprop=dateModified content="2025-11-03T07:56:08+10:00"><meta itemprop=wordCount content="31"><meta name=twitter:card content="summary"><meta name=twitter:title content="Architecture"><meta name=twitter:description content="The architecture of the Neurodesk ecosystem"><link href=https://neurodesk.github.io/pr-621/scss/main.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.8.2 integrity="sha512-l7pkV1dOURFyHCeH8I4fK9lCkQKuqhlsTCqRl3zktifDlB8oTUJ+mJPgYkK9kHpUut8j1iPquTv32t6hvTPv3g==" crossorigin=anonymous></head><body class=td-section><header><nav class="td-navbar navbar-expand-xl navbar-dark bg-dark"><div class="container-fluid flex-md-row"><a class=navbar-brand href=https://neurodesk.github.io/pr-621/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" viewBox="0 0 560.3 82.7"><defs><style>.st0{isolation:isolate}.st1{fill:#6ba442}.st2{fill:#fff}</style></defs><g class="st0"><path class="st2" d="M30.2 73.4h-9.9v-60h9.8l33.3 44.8V13.4h10.1v60H63.4L30.1 29.1v44.3z"/><path class="st2" d="M85.8 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4H95.6v13.5H129l1.8 11.6h-45v-60z"/><path class="st2" d="M141.4 13.4h9.9v50.2h28.2V13.4h9.9v51.4c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.8 1.8-1.1.4-2.2.7-3.3.7h-30.7c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7s-.7-2.2-.7-3.3V13.4z"/><path class="st2" d="M244.7 34.8c0 4.6-1.4 7.9-4.3 10-4 2.9-8.4 4.4-13.2 4.4l17.5 24.3h-12.1l-14.7-24h-9.5v24h-8.5V13.4h29.8c10 0 15 4.9 15 14.6v6.8zm-36.3 6h15.2c3.9-.2 6.6-.7 8-1.6 2.6-1.8 3.9-2.9 3.9-3.5V29c0-2.2-.6-3.9-1.7-5-1.4-1.4-3-2.1-4.7-2.1h-20.8v18.9z"/><path class="st2" d="M306.5 59.4c0 4.8-.3 7.7-.6 8.7-.3.9-.9 1.8-1.8 2.8s-1.7 1.3-3.1 1.8c-1.3.5-3.6.7-6.8.7h-27.1c-1.2.0-2.8-.2-5-.6-2.5-.5-3.9-1.1-4.4-1.8-.9-1.5-1.6-2.4-1.8-2.7-.4-.6-.7-3.6-.7-8.7V42.1c0-8.8.0-14.1.2-15.9.0-2.6.3-5 .7-7.4.1-.8.7-1.7 1.7-2.7.6-.7 2.1-1.3 4.4-1.8 1.9-.4 3.5-.7 5-.7h27.1c3.5.0 5.7.1 6.8.6 1.3.5 2.3 1.1 3.1 1.9.9.8 1.5 1.7 2 2.7.4.8.6 3.3.6 7.4l.2 16.7c0 8.1-.1 13.6-.3 16.7zM265.4 23.3v40h31.2v-40h-31.2z"/></g><g class="st0"><path class="st1" d="M316.2 73.4v-60l31.3.3c2.5.0 5.4.6 8.7 1.9 2.6 1 4.8 2.4 6.6 4.3 2 2 3.4 4.2 4.3 6.6 1 3 1.5 5.9 1.5 8.7v17.3c0 3.2-.5 6.1-1.5 8.7s-2.4 4.8-4.2 6.6-4 3.2-6.6 4.2-5.5 1.5-8.7 1.5h-31.3zm30.7-11.2c4.9.0 8-.7 9.2-2 2.1-2.3 3.2-5.8 3.2-10.4v-14c.2-1.9-.2-3.6-1.1-5.2-.8-1.5-1.8-2.8-2.9-3.9-1.1-1.1-2.4-1.9-3.9-2.4-1.5-.6-3-.8-4.4-.8h-21.3v38.8h21.2z"/><path class="st1" d="M381 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4h-20.1v13.5h33.4l1.8 11.6h-45v-60z"/><path class="st1" d="M446.4 46.5c-1.1.0-2.2-.3-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3V22.1c0-1.2.2-2.3.7-3.3s1.1-2 1.8-2.7 1.7-1.4 2.8-1.8 2.2-.7 3.3-.7h29.1c1.2.0 2.3.2 3.3.7s1.9 1.1 2.7 1.8c1.1 1 1.7 2 1.8 2.8l.7 3.3v6.7l-9 2.7v-7.7h-28.7v14.3l29.1.5c1.2.0 2.3.3 3.3.7 1.1.4 2 1.1 2.8 1.8.8.8 1.4 1.7 1.8 2.7.4 1 .7 2.2.7 3.3V65c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.7 1.8-1 .4-2.1.7-3.3.7h-30c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3v-7.7l9.5-1.6v7.7h28.7V47.2l-28.7-.5z"/><path class="st1" d="M505.4 13.4v23.9l26.2-23.9h12.9l-30.8 27.4 32.1 32.6h-12.9l-27.5-28.1v28.1h-10.6v-60h10.6z"/></g></svg></span></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=main_navbar><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.github.io/pr-621/overview/><span>Overview</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.github.io/pr-621/getting-started/><span>Getting Started</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.github.io/pr-621/tutorials-examples/><span>Tutorials & Examples</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class="nav-link active" href=https://neurodesk.github.io/pr-621/developers/><span class=active>Developer Documentation</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/NeuroDesk target=_blank><span>GitHub</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.github.io/pr-621/contact/><span>Contact</span></a></li></ul><div class="navbar-nav d-lg-block"><div class=td-search><div class=td-search--algolia id=docsearch-0></div></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=https://neurodesk.github.io/pr-621/developers/architecture/>Return to the regular view of this page</a>.</p></div><h1 class=title>Architecture</h1><div class=lead>The architecture of the Neurodesk ecosystem</div><ul><li>1: <a href=#pg-0520384e83c6213075507d31fd6fd347>Neurodesk Architecture</a></li><li>2: <a href=#pg-d2ee0d937ef9e23352513cee17667503>Neurodesktop Release Process</a></li><li>3: <a href=#pg-4e0ebcb307acf80f9f0f9d5fcf769e45>Neurodesktop Dev</a></li><li>4: <a href=#pg-daf4fef4a749d3712ee99e4574cbffa0>Transparent Singularity</a></li><li>5: <a href=#pg-81ddb8249d10bc700318da3e58f62452>Neurodesk CVMFS</a></li><ul><li>5.1: <a href=#pg-04dd4e6ae6bbe52a03f55bcb638dc486>Setup CVMFS Proxy</a></li><li>5.2: <a href=#pg-273eda215917497c767f6fea98e380ed>CVMFS architecture</a></li><li>5.3: <a href=#pg-8b8736e6153542cb7323021b49fd589d>Setup Stratum 0 server</a></li><li>5.4: <a href=#pg-320ee66f16d941ee549b4c6f15785e99>Setup Stratum 1 server</a></li></ul><li>6: <a href=#pg-669e1a928395f271b6b3631700262b49>Project Roadmap</a></li></ul><div class=content><h2 id=overview>Overview</h2><p>Neurodesk is built with a modular architecture that combines several key components to provide a flexible and powerful neuroimaging analysis environment. The diagram below illustrates how these components work together:</p><div style="text-align:center;margin:2em 0"><img src={{ /static/developers/architecture/neurodeskpaperfigurewithopenrecon.png" | relurl }}" style=max-width:1000px;width:100% alt="Neurodesk Architecture Overview"><p style=margin-top:1em;font-style:italic>Neurodesk ecosystem architecture showing the main components and their interactions</p></div></div></div><div class=td-content><h1 id=pg-0520384e83c6213075507d31fd6fd347>1 - Neurodesk Architecture</h1><div class=lead>The architecture of the Neurodesk ecosystem</div><p><img src=https://neurodesk.github.io/pr-621/static/developers/architecture/neurodesk-components/NeurodeskArchitecture.png alt=architecture title=architecture></p><h2 id=neurodesktop-recommended-for-beginners>Neurodesktop: Recommended for Beginners</h2><p><em>Neurodesktop</em> is a compact Docker container with a browser-accessible virtual desktop that allows you develop and implement data analysis, pre-equipped with basic fMRI and EEG analysis tools.
To get started, see: <a href=https://neurodesk.github.io/pr-621/docs/getting-started/neurodesktop>Neurodesktop</a> (<a href=https://github.com/NeuroDesk/neurodesktop target=_blank rel=noopener>Github</a>)</p><ul><li>docker container with interface modifications</li><li>contains tools necessary to manage workflows in sub-containers: vscode, git</li><li>CI: builds docker image and tests if it runs; tests if CVMFS servers are OK before deployment</li><li>CD: pushes images to github & docker registry</li></ul><h2 id=neurocommand>Neurocommand:</h2><p><em>Neurocommand</em> offers the option to install and manage multiple distinct containers for more advanced users who prefer a command-line interface. <em>Neurocommand</em> is the recommended interface for users seeking to use Neurodesk in high performance computing (HPC) environments.</p><p>To get started, see: <a href=https://neurodesk.github.io/pr-621/docs/getting-started/neurocommand>Neurocommand</a> (<a href=https://github.com/NeuroDesk/neurocommand target=_blank rel=noopener>Github</a>)</p><ul><li>script to install and manage multiple containers using transparent singularity on any linux system</li><li>this repo also handles the creation of menu entries in a general form applicable to different desktop environments</li><li>this repo can be re-used in other projects like CVL and when installing it on bare-metal workstations</li><li>CI: tests if containers can be installed</li><li>CD: this repo checks if containers requested in apps.json file are available on object storage and if not converts the singularity containers based on the docker containers and uploads them to object storage</li></ul><h2 id=transparent-singularity>transparent-singularity:</h2><p><em>transparent-singularity</em> offers seamless access to applications installed in <em>neurodesktop</em> and <em>neurocommand</em>, treating containerised software as native installations.</p><p>More info: <a href=https://neurodesk.github.io/pr-621/developers/architecture/transparent_singularity>transparent-singularity</a> (<a href=https://github.com/NeuroDesk/transparent-singularity target=_blank rel=noopener>Github</a>)</p><ul><li>script to install neuro-sub-containers, installers are called by neurocommand</li><li>this repo provides a way of using our containers on HPCs for large scale processing of the pipelines (including the support of SLURM and other job schedulers)</li><li>CI: test if exposing of binaries from container works</li></ul><h2 id=tinyrange-integration>TinyRange Integration</h2><p>To ensure accessibility for users without privileged system access (root/admin permissions), Neurodesk has integrated <a href=https://github.com/tinyrange/tinyrange target=_blank rel=noopener>TinyRange</a>, a lightweight container runtime that operates without requiring root privileges. This integration represents a significant advancement in making neuroimaging tools accessible to all users, regardless of their system permissions.</p><div style="text-align:center;margin:2em 0"><img src={{ /static/developers/architecture/neurodesk-components/tinyrange.png" | relurl }}" alt="TinyRange Architecture" style=max-width:800px;width:100%></div><p>TinyRange provides:</p><ul><li>Rootless container execution</li><li>User-space networking</li><li>Simplified container management</li><li>Seamless integration with Neurodesk&rsquo;s interface</li><li>Cross-platform compatibility</li></ul><p>This solution is particularly valuable in environments where users don&rsquo;t have administrative privileges, such as shared computing facilities or institutional workstations.</p><h2 id=neurocontainers>Neurocontainers:</h2><p><em>neurocontainers</em> contains scripts for building sub-containers for neuroimaging data-analysis software. These containers can be used alongside <em>neurocommand</em> or <em>transparent-singularity</em>.</p><p>To get started, see: <a href=https://neurodesk.github.io/pr-621/docs/getting-started/neurocontainers>Neurocontainers</a> (<a href=https://github.com/NeuroDesk/neurocontainers target=_blank rel=noopener>Github</a>)</p><ul><li>build scripts for neuro-sub-containers</li><li>CI: building and testing of containers</li><li>CD: pushing containers to github and dockerhub registry</li></ul><h2 id=neurodocker>Neurodocker:</h2><p><em>Neurodocker</em> is a command-line program that generates custom Dockerfiles and Singularity recipes for neuroimaging and minifies existing containers.</p><p>More info: <a href=https://github.com/NeuroDesk/neurodocker target=_blank rel=noopener>Github</a></p><ul><li>fork of neurodocker project</li><li>provides recipes for our containers built</li><li>we are providing pull requests back of recipes</li><li>CI: handled by <a href=https://github.com/ReproNim/neurodocker target=_blank rel=noopener>neurodocker</a> - testing of generating container recipes</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-d2ee0d937ef9e23352513cee17667503>2 - Neurodesktop Release Process</h1><div class=lead>A description of what to do to create new release of our Neurodesktop</div><h2 id=neurodesktop>Neurodesktop:</h2><ol><li>Check if the last automated build ran OK: <a href=https://github.com/NeuroDesk/neurodesktop/actions target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/actions</a></li><li>Run this build date and test if everything is ok and no regression happened</li><li>Check what changes where made since the last release: <a href=https://github.com/NeuroDesk/neurodesktop/commits/main target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/commits/main</a></li><li>Summarize the main changes and copy this to the Release History: <a href=https://neurodesk.org/docs/overview/release-history/ target=_blank rel=noopener>https://neurodesk.org/docs/overview/release-history/</a></li><li>Change the version of the latest desktop in <a href=https://github.com/NeuroDesk/neurodesk.github.io/blob/main/data/neurodesktop.toml target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/blob/main/data/neurodesktop.toml</a></li><li>Commit all changes</li><li>Tweet a quick summary of the changes and announce new version: <a href=https://masto.ai/@Neurodesk target=_blank rel=noopener>https://masto.ai/@Neurodesk</a></li></ol><h2 id=neurodesk-app>Neurodesk App:</h2><h3 id=release-process>Release process</h3><p>Follow these steps to create a new release of the <a href=https://github.com/NeuroDesk/neurodesk-app target=_blank rel=noopener>Neurodesk App</a>.</p><ol><li><p>If there&rsquo;s new version of Neurodesktop image, Github Action will PR with updated jupyter_neurodesk_version in neurodesktop.toml file. Double-check and merge this PR.</p></li><li><p>Create a new release on GitHub as <code>pre-release</code>. Set the release <code>tag</code> to the value of target application version and prefix it with <code>v</code> (for example <code>v1.0.0</code> for Neurodesk App version <code>1.0.0</code>). Enter release title and release notes. Release needs to stay as <code>pre-release</code> for GitHub Actions to be able to attach installers to the release.</p></li><li><p>Make sure that application is building, installing and running properly.</p></li><li><p>In the main branch, create a branch preferably with the name <code>release-v&lt;new-version></code>. Add a commit with the version changes in package.json file. This is necessary for GitHub Actions to be able to attach installers to the release. (for example <code>"version": "1.0.0"</code>).</p></li><li><p>GitHub Actions will automatically create installers for each platform (Linux, macOS, Windows) and upload them as release assets. Assets will be uploaded only if a release of type <code>pre-release</code> with tag matching the Neurodesk App&rsquo;s version with a <code>v</code> prefix is found. For example, if the Neurodesk App version in the PR is <code>1.0.0</code>, the installers will be uploaded to a release that is flagged as <code>pre-release</code> and has a tag <code>v1.0.0</code>. New commits to this branch will overwrite the installer assets of the release.</p></li><li><p>Once all the changes are complete, and installers are uploaded to the release then publish the release.</p></li></ol><h3 id=update-macos-certificate>Update MacOS certificate</h3><p>Follow these step-by-step instructions to generate and export the required Macos certificate for Neurodesk App release.</p><ol><li>Launch the &ldquo;Keychain Access&rdquo; application on your Mac, go to &ldquo;Certificate Assistant.&rdquo;</li><li>Request Certificate from Certificate Authority: Within &ldquo;Certificate Assistant,&rdquo; select &ldquo;Request a Certificate from a Certificate Authority.&rdquo;</li><li>Follow the URL to access the Apple Developer website: <a href=https://developer.apple.com/account/resources/certificates/add target=_blank rel=noopener>https://developer.apple.com/account/resources/certificates/add</a>, upload the generated certificate.</li><li>After uploading the certificate, download the resulting file provided by the Apple Developer website.</li><li>Import the Certificate in Keychain.</li><li>Right-click the imported certificate in &ldquo;Keychain Access.&rdquo;, choose &ldquo;Export&rdquo; and save it in .p12 format.</li><li>Convert the .p12 file to Base64 using the following command:
<code>openssl base64 -in neurodesk_certificate.p12</code></li></ol><h3 id=update-the-github-secrets-for-publish-workflow>Update the GitHub Secrets for Publish workflow</h3><p>⚠️ <strong>Security Note</strong>: These values contain highly sensitive credentials. Never commit them to version control or share them publicly. Always store them as GitHub repository secrets.</p><p>To set these secrets, go to your repository Settings → Secrets and variables → Actions → Repository secrets:</p><p><strong>APPLEID</strong>: Email address associated with your Apple Developer account</p><ul><li>Found in: Your Apple ID account settings</li></ul><p><strong>APPLEIDPASS</strong>: App-Specific Password for your Apple account</p><ul><li>Found in: <a href=https://account.apple.com/ target=_blank rel=noopener>https://account.apple.com/</a> → Sign-In and Security → App-Specific Passwords</li><li>Generate a new one if needed for this specific use case</li></ul><p><strong>APPLE_TEAM_ID</strong>: Your Apple Developer Team ID</p><ul><li>Found in: <a href=https://developer.apple.com/ target=_blank rel=noopener>https://developer.apple.com/</a> → Account name (top right corner) → View Membership → Membership Details section</li><li>Look for the &ldquo;Team ID&rdquo; field</li></ul><p><strong>CSC_KEY_PASSWORD</strong>: The password you set when converting the certificate in the &ldquo;Update MacOS certificate&rdquo; section above</p><p><strong>CSC_LINK</strong>: Base64-encoded content of the .p12 certificate file</p><ul><li>This is the output from the <code>openssl base64 -in neurodesk_certificate.p12</code> command in step 7 above</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-4e0ebcb307acf80f9f0f9d5fcf769e45>3 - Neurodesktop Dev</h1><div class=lead>Testing the latest dev version of Neurodesktop</div><div class="alert alert-warning" role=alert><h4 class=alert-heading>Warning</h4>For development and testing only. Not recommended for production use</div><h2 id=building-neurodesktop-dev>Building neurodesktop-dev</h2><p>Dev builds can be triggered by Neurodesk admins from <a href=https://github.com/NeuroDesk/neurodesktop/actions/workflows/build-neurodesktop-dev.yml target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/actions/workflows/build-neurodesktop-dev.yml</a></p><h2 id=running-latest-neurodesktop-dev>Running latest neurodesktop-dev</h2><h3 id=linux>Linux</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker pull vnmd/neurodesktop-dev:latest
</span></span><span style=display:flex><span>sudo docker run <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --shm-size<span style=color:#0550ae>=</span>1gb -it --cap-add SYS_ADMIN <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --security-opt apparmor:unconfined --device<span style=color:#0550ae>=</span>/dev/fuse <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  --name neurodesktop-dev <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -v ~/neurodesktop-storage:/neurodesktop-storage <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -e <span style=color:#953800>NB_UID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -u<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> -e <span style=color:#953800>NB_GID</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;</span><span style=color:#cf222e>$(</span>id -g<span style=color:#cf222e>)</span><span style=color:#0a3069>&#34;</span> <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  -p 8888:8888 -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>dev <span style=color:#0a3069>\
</span></span></span><span style=display:flex><span><span style=color:#0a3069></span>  vnmd/neurodesktop-dev:latest</span></span></code></pre></div></div><h3 id=windows>Windows</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker pull vnmd/neurodesktop-dev:latest
</span></span><span style=display:flex><span>docker run --shm-size<span style=color:#0550ae>=</span>1gb -it --cap-add SYS_ADMIN --security-opt apparmor:unconfined --device<span style=color:#0550ae>=</span>/dev/fuse --name neurodesktop -v C:/neurodesktop-storage:/neurodesktop-storage -p 8888:8888 -e <span style=color:#953800>NEURODESKTOP_VERSION</span><span style=color:#0550ae>=</span>dev vnmd/neurodesktop-dev:latest</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-daf4fef4a749d3712ee99e4574cbffa0>4 - Transparent Singularity</h1><div class=lead>For more advanced users who wish to use Transparent Singularity directly</div><p>Transparent singularity is here <a href=https://github.com/NeuroDesk/transparent-singularity/ target=_blank rel=noopener>https://github.com/NeuroDesk/transparent-singularity/</a></p><p>This project allows to use singularity containers transparently on HPCs, so that an application inside the container can be used without adjusting any scripts or pipelines (e.g. nipype).</p><h2 id=important-add-bind-points-to-bashrc-before-executing-this-script>Important: add bind points to .bashrc before executing this script</h2><p>This script expects that you have adjusted the Singularity Bindpoints in your .bashrc, e.g.:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#cf222e>export</span> SINGULARITY_BINDPATH<span style=color:#0550ae>=</span><span style=color:#0a3069>&#34;/gpfs1/,/QRISdata,/data&#34;</span></span></span></code></pre></div></div><h2 id=this-gives-you-a-list-of-all-tested-images-available-in-neurodesk>This gives you a list of all tested images available in neurodesk:</h2><p><a href=https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/log.txt target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/log.txt</a></p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>curl -s https://raw.githubusercontent.com/NeuroDesk/neurocommand/main/cvmfs/log.txt</span></span></code></pre></div></div><h2 id=clone-repo-into-a-folder-with-the-intended-image-name>Clone repo into a folder with the intended image name</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/NeuroDesk/transparent-singularity convert3d_1.0.0_20210104</span></span></code></pre></div></div><h2 id=install>Install</h2><p>This will create scripts for every binary in the container located in the $DEPLOY_PATH inside the container. It will also create activate and deactivate scripts and module files for lmod (<a href=https://lmod.readthedocs.io/en/latest target=_blank rel=noopener>https://lmod.readthedocs.io/en/latest</a>)</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>cd convert3d_1.0.0_20210104
</span></span><span style=display:flex><span>./run_transparent_singularity.sh convert3d_1.0.0_20210104</span></span></code></pre></div></div><h2 id=options-for-transparent-singularity>Options for Transparent singularity:</h2><ul><li><code>--storage</code> - this option can be used to force a download from docker, e.g.: <code>--storage docker</code></li><li><code>--container</code> - this option can be used to explicitly define the container name to be downloaded</li><li><code>--unpack</code> - this will unpack the singularity container so it can be used on systems that do not allow to open simg / sif files for security reasons, e.g.: <code>--unpack true</code></li><li><code>--singularity-opts</code> - this will be passed on to the singularity call, e.g.: <code>--singularity-opts '--bind /cvmfs'</code></li></ul><h1 id=use-in-module-system-lmod>Use in module system LMOD</h1><p>Add the module folder path to $MODULEPATH</p><h1 id=manual-activation-and-deactivation-in-case-module-system-is-not-available-this-will-add-the-paths-to-the-bashrc>Manual activation and deactivation (in case module system is not available). This will add the paths to the .bashrc</h1><h2 id=activate>Activate</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>source activate_convert3d_1.0.0_20210104.sh</span></span></code></pre></div></div><h2 id=deactivate>Deactivate</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>source deactivate_convert3d_1.0.0_20210104.sif.sh</span></span></code></pre></div></div><h2 id=uninstall-container-and-cleanup>Uninstall container and cleanup</h2><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./ts_uninstall.sh</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-81ddb8249d10bc700318da3e58f62452>5 - Neurodesk CVMFS</h1><div class=lead>How to interact with our CVMFS service.</div></div><div class=td-content><h1 id=pg-04dd4e6ae6bbe52a03f55bcb638dc486>5.1 - Setup CVMFS Proxy</h1><div class=lead>Setup CVMFS Proxy server</div><p>If you want more speed in a region one way could be to setup another Stratum 1 server or a proxy. We currently don&rsquo;t run any proxy servers but it would be important for using it on a cluster.</p><h1 id=setup-a-cvmfs-proxy-server>Setup a CVMFS proxy server</h1><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install -y squid</span></span></code></pre></div></div><p>Open the <code>squid.conf</code>and use the following configuration</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/squid/squid.conf</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#57606a># List of local IP addresses (separate IPs and/or CIDR notation) allowed to access your local proxy</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#acl local_nodes src YOUR_CLIENT_IPS</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Destination domains that are allowed</span>
</span></span><span style=display:flex><span>acl stratum_ones dstdomain <span style=color:#0550ae>.</span>neurodesk<span style=color:#0550ae>.</span>org <span style=color:#0550ae>.</span>openhtc<span style=color:#0550ae>.</span>io <span style=color:#0550ae>.</span>cern<span style=color:#0550ae>.</span>ch <span style=color:#0550ae>.</span>gridpp<span style=color:#0550ae>.</span>rl<span style=color:#0550ae>.</span>ac<span style=color:#0550ae>.</span>uk <span style=color:#0550ae>.</span>opensciencegrid<span style=color:#0550ae>.</span>org
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Squid port</span>
</span></span><span style=display:flex><span>http_port <span style=color:#0550ae>3128</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Deny access to anything which is not part of our stratum_ones ACL.</span>
</span></span><span style=display:flex><span>http_access allow stratum_ones
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Only allow access from our local machines</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#http_access allow local_nodes</span>
</span></span><span style=display:flex><span>http_access allow localhost
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Finally, deny all other access to this proxy</span>
</span></span><span style=display:flex><span>http_access deny all
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>minimum_expiry_time <span style=color:#0550ae>0</span>
</span></span><span style=display:flex><span>maximum_object_size <span style=color:#0550ae>1024</span> MB
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cache_mem <span style=color:#0550ae>128</span> MB
</span></span><span style=display:flex><span>maximum_object_size_in_memory <span style=color:#0550ae>128</span> KB
</span></span><span style=display:flex><span><span style=color:#57606a># 5 GB disk cache</span>
</span></span><span style=display:flex><span>cache_dir ufs <span style=color:#0550ae>/</span><span style=color:#cf222e>var</span><span style=color:#0550ae>/</span>spool<span style=color:#0550ae>/</span>squid <span style=color:#0550ae>5000</span> <span style=color:#0550ae>16</span> <span style=color:#0550ae>256</span></span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo squid -k parse
</span></span><span style=display:flex><span>sudo systemctl start squid
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> squid
</span></span><span style=display:flex><span>sudo systemctl status squid
</span></span><span style=display:flex><span>sudo systemctl restart squid</span></span></code></pre></div></div><p>Then add the proxy to the cvmfs config:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>CVMFS_HTTP_PROXY=&#34;http://proxy-address:3128&#34;</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-273eda215917497c767f6fea98e380ed>5.2 - CVMFS architecture</h1><div class=lead>CVMFS architecture</div><p>We store our singularity containers unpacked on CVMFS. We tried the DUCC tool in the beginning, but it was causing too many issues with dockerhub and we were rate limited. The script to unpack our singularity containers is here: <a href=https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/sync_containers_to_cvmfs.sh target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/sync_containers_to_cvmfs.sh</a></p><p>It gets called by a cronjob on the CVMFS Stratum 0 server and relies on the log.txt file being updated via an action in the neurocommand repository (<a href=https://github.com/NeuroDesk/neurocommand/blob/main/.github/workflows/upload_containers_simg.sh target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/.github/workflows/upload_containers_simg.sh</a>)</p><p>The Stratum 1 servers then pull this repo from Stratum 0 and our desktops mount these repos (configured here: <a href=https://github.com/NeuroDesk/neurodesktop/blob/main/Dockerfile target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/blob/main/Dockerfile</a>)</p><p>The startup script (<a href=https://github.com/NeuroDesk/neurodesktop/blob/main/config/jupyter/before_notebook.sh target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/blob/main/config/jupyter/before_notebook.sh</a>) sets up CVMFS and tests which server is fastest during the container startup.</p><p>This can also be done manually:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host info
</span></span><span style=display:flex><span>sudo cvmfs_talk -i neurodesk.ardc.edu.au host probe
</span></span><span style=display:flex><span>cvmfs_config stat -v neurodesk.ardc.edu.au</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-8b8736e6153542cb7323021b49fd589d>5.3 - Setup Stratum 0 server</h1><div class=lead>Host a Stratum 0 server</div><h2 id=setup-a-stratum-0-server>Setup a Stratum 0 server:</h2><h3 id=setup-storage>Setup Storage</h3><p>(would object storage be better? -> see comment below under next iteration ideas)</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>lsblk -l
</span></span><span style=display:flex><span>sudo mkfs.ext4 /dev/vdb
</span></span><span style=display:flex><span>sudo mkdir /storage
</span></span><span style=display:flex><span>sudo mount /dev/vdb /storage/ -t auto
</span></span><span style=display:flex><span>sudo chown ec2-user /storage/
</span></span><span style=display:flex><span>sudo chmod a+rwx /storage/</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/fstab
</span></span><span style=display:flex><span>/dev/vdb  /storage    auto    defaults,nofail   <span style=color:#0550ae>0</span>  <span style=color:#0550ae>2</span></span></span></code></pre></div></div><h3 id=setup-server>Setup server</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install vim htop gcc git screen
</span></span><span style=display:flex><span>sudo timedatectl set-timezone Australia/Brisbane
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo yum install -y https://ecsft.cern.ch/dist/cvmfs/cvmfs-release/cvmfs-release-latest.noarch.rpm
</span></span><span style=display:flex><span>sudo yum install -y cvmfs cvmfs-server
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> httpd
</span></span><span style=display:flex><span>sudo systemctl restart httpd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># sudo systemctl stop firewalld</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># restore keys:</span>
</span></span><span style=display:flex><span>sudo mkdir /etc/cvmfs/keys/incoming
</span></span><span style=display:flex><span>sudo chmod a+rwx /etc/cvmfs/keys/incoming
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> connections/cvmfs_keys/
</span></span><span style=display:flex><span>scp neuro* ec2-user@203.101.226.164:/etc/cvmfs/keys/incoming
</span></span><span style=display:flex><span>sudo mv /etc/cvmfs/keys/incoming/* /etc/cvmfs/keys/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#backup keys: </span>
</span></span><span style=display:flex><span><span style=color:#57606a>#mkdir cvmfs_keys</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#scp opc@158.101.127.61:/etc/cvmfs/keys/neuro* .</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_server mkfs -o <span style=color:#953800>$USER</span> neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> /storage
</span></span><span style=display:flex><span>sudo mkdir -p cvmfs-storage/srv/
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> /srv/
</span></span><span style=display:flex><span>sudo mv cvmfs/ /storage/cvmfs-storage/srv/
</span></span><span style=display:flex><span>sudo ln -s /storage/cvmfs-storage/srv/cvmfs/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> /var/spool
</span></span><span style=display:flex><span>sudo mkdir /storage/spool
</span></span><span style=display:flex><span>sudo mv cvmfs/ /storage/spool/
</span></span><span style=display:flex><span>sudo ln -s  /storage/spool/cvmfs .
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cvmfs_server transaction neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cvmfs_server publish neurodesk.ardc.edu.au</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo vi /etc/cron.d/cvmfs_resign</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#0550ae>0</span> <span style=color:#0550ae>11</span> * * <span style=color:#0550ae>1</span> root /usr/bin/cvmfs_server resign neurodesk.ardc.edu.au</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat /etc/cvmfs/keys/neurodesk.ardc.edu.au.pub</span></span></code></pre></div></div><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuV9JBs9uXBR83qUs7AiE
</span></span><span style=display:flex><span>nSQfvh6VCdNigVzOfRMol5cXsYq3cFy/Vn1Nt+7SGpDTQArQieZo4eWC9ww2oLq0
</span></span><span style=display:flex><span>vY1pWyAms3Y4i+IUmMbwNifDU4GQ1KN9u4zl9Peun2YQCLE7mjC0ZLQtLM7Q0Z8h
</span></span><span style=display:flex><span>NwP8jRJTN+u8mRKzkyxfSMLscVMKhm2pAwnT1zB9i3bzVV+FSnidXq8rnnzNHMgv
</span></span><span style=display:flex><span>tfqx1h0gVyTeodToeFeGG5vq69wGZlwEwBJWVRGzzr+a8dWNBFMJ1HxamrBEBW4P
</span></span><span style=display:flex><span>AxOKGHmQHTGbo+tdV/K6ZxZ2Ry+PVedNmbON/EPaGlI8Vd0fascACfByqqeUEhAB
</span></span><span style=display:flex><span>dQIDAQAB
</span></span><span style=display:flex><span>-----END PUBLIC KEY-----</span></span></code></pre></div></div><h2 id=next-iteration-of-this>Next iteration of this:</h2><h3 id=use-object-storage>use object storage?</h3><ul><li>current implementation uses block storage, but this makes increasing the volume size a bit more work</li><li>we couldn&rsquo;t get object storage to work on Oracle as it assumes AWS S3 -> Try again on AWS</li></ul><h3 id=optimize-settings-for-repositories-for-container-images>Optimize settings for repositories for Container Images</h3><p>from the CVMFS documentation:
Repositories containing Linux container image contents (that is: container root file systems) should use overlayfs as a union file system and have the following configuration:</p><pre><code>CVMFS_INCLUDE_XATTRS=true
CVMFS_VIRTUAL_DIR=true
</code></pre><p>Extended attributes of files, such as file capabilities and SElinux attributes, are recorded. And previous file system revisions can be accessed from the clients.</p><h2 id=currently-not-used>Currently not used</h2><p>We tested the DUCC tool in the beginning, but it was leading to too many docker pulls and we therefore replaced it with our own script: <a href=https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/sync_containers_to_cvmfs.sh target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/blob/main/cvmfs/sync_containers_to_cvmfs.sh</a></p><p>This is the old DUCC setup</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install cvmfs-ducc.x86_64
</span></span><span style=display:flex><span>sudo -i
</span></span><span style=display:flex><span>dnf install -y yum-utils 
</span></span><span style=display:flex><span>yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
</span></span><span style=display:flex><span>dnf install docker-ce docker-ce-cli containerd.io
</span></span><span style=display:flex><span>systemctl <span style=color:#6639ba>enable</span> docker
</span></span><span style=display:flex><span>systemctl start docker
</span></span><span style=display:flex><span>docker version
</span></span><span style=display:flex><span>docker info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># leave root mode</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo groupadd docker
</span></span><span style=display:flex><span>sudo usermod -aG docker <span style=color:#953800>$USER</span>
</span></span><span style=display:flex><span>sudo chown root:docker /var/run/docker.sock
</span></span><span style=display:flex><span>newgrp docker
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vi convert_appsjson_to_wishlist.sh
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>DUCC_DOCKER_REGISTRY_PASS</span><span style=color:#0550ae>=</span>configure_secret_password_here_and_dont_push_to_github
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> neurodesk
</span></span><span style=display:flex><span>git pull
</span></span><span style=display:flex><span>./gen_cvmfs_wishlist.sh
</span></span><span style=display:flex><span>cvmfs_ducc convert recipe_neurodesk_auto.yaml
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> ..
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chmod +x convert_appsjson_to_wishlist.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>git clone https://github.com/NeuroDesk/neurodesk/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># setup cron job</span>
</span></span><span style=display:flex><span>sudo vi /etc/cron.d/cvmfs_dockerpull
</span></span><span style=display:flex><span>*/5 * * * * opc <span style=color:#6639ba>cd</span> ~ <span style=color:#0550ae>&amp;&amp;</span> bash /home/opc/convert_appsjson_to_wishlist.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#vi recipe.yaml</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>##version: 1</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#user: vnmd</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cvmfs_repo: neurodesk.ardc.edu.au</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#output_format: &#39;$(scheme)://$(registry)/vnmd/thin_$(image)&#39;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#input:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#- &#39;https://registry.hub.docker.com/vnmd/tgvqsm_1.0.0:20210119&#39;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#- &#39;https://registry.hub.docker.com/vnmd/itksnap_3.8.0:20201208&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cvmfs_ducc convert recipe_neurodesk.yaml</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cvmfs_ducc convert recipe_unpacked.yaml</span></span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-320ee66f16d941ee549b4c6f15785e99>5.4 - Setup Stratum 1 server</h1><div class=lead>Host a Stratum 1 server</div><p>The stratum 1 servers for the desktop are configured here: <a href=https://github.com/NeuroDesk/neurodesktop/blob/main/Dockerfile target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/blob/main/Dockerfile</a></p><p>If you want more speed in a region one way could be to setup another Stratum 1 server or a proxy.</p><h1 id=setup-a-stratum-1-server-this-setup-works-best-on-rocky-linux-9>Setup a Stratum 1 server (This setup works best on Rocky Linux 9):</h1><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo yum install -y https://ecsft.cern.ch/dist/cvmfs/cvmfs-release/cvmfs-release-latest.noarch.rpm
</span></span><span style=display:flex><span>sudo yum install -y cvmfs-server squid tmux
</span></span><span style=display:flex><span>sudo yum install -y python3-mod_wsgi 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo dnf install dnf-automatic -y
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> dnf-automatic-install.timer
</span></span><span style=display:flex><span>sudo systemctl status dnf-automatic-install
</span></span><span style=display:flex><span>sudo systemctl cat dnf-automatic-install.timer
</span></span><span style=display:flex><span>sudo vi /etc/dnf/automatic.conf
</span></span><span style=display:flex><span><span style=color:#57606a># check if automatic updates are downloaded and applied</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tmux new -s cvmfs
</span></span><span style=display:flex><span><span style=color:#57606a># return to session: tmux a -t cvmfs</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo sed -i <span style=color:#0a3069>&#39;s/Listen 80/Listen 127.0.0.1:8080/&#39;</span> /etc/httpd/conf/httpd.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>set</span> +H
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;http_port 80 accel&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;http_port 8000 accel&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;http_access allow all&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;cache_peer 127.0.0.1 parent 8080 0 no-query originserver&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;acl CVMFSAPI urlpath_regex ^/cvmfs/[^/]*/api/&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;cache deny !CVMFSAPI&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;cache_mem 128 MB&#34;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/squid/squid.conf
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl start httpd
</span></span><span style=display:flex><span>sudo systemctl start squid
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> httpd
</span></span><span style=display:flex><span>sudo systemctl <span style=color:#6639ba>enable</span> squid
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#YOU NEED TO ADD YOUR GEO IP data here!</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;CVMFS_GEO_ACCOUNT_ID=APPLY_FOR_ONE_THIS_IS_a_SIX_DIGIT_NUMBER&#39;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/server.local
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;CVMFS_GEO_LICENSE_KEY=APPLY_FOR_ONE_THIS_IS_a_password&#39;</span> <span style=color:#1f2328>|</span> sudo tee -a /etc/cvmfs/server.local
</span></span><span style=display:flex><span>sudo chmod <span style=color:#0550ae>600</span> /etc/cvmfs/server.local
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo mkdir -p /etc/cvmfs/keys/ardc.edu.au/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;-----BEGIN PUBLIC KEY-----
</span></span></span><span style=display:flex><span><span style=color:#0a3069>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAwUPEmxDp217SAtZxaBep
</span></span></span><span style=display:flex><span><span style=color:#0a3069>Bi2TQcLoh5AJ//HSIz68ypjOGFjwExGlHb95Frhu1SpcH5OASbV+jJ60oEBLi3sD
</span></span></span><span style=display:flex><span><span style=color:#0a3069>qA6rGYt9kVi90lWvEjQnhBkPb0uWcp1gNqQAUocybCzHvoiG3fUzAe259CrK09qR
</span></span></span><span style=display:flex><span><span style=color:#0a3069>pX8sZhgK3eHlfx4ycyMiIQeg66AHlgVCJ2fKa6fl1vnh6adJEPULmn6vZnevvUke
</span></span></span><span style=display:flex><span><span style=color:#0a3069>I6U1VcYTKm5dPMrOlY/fGimKlyWvivzVv1laa5TAR2Dt4CfdQncOz+rkXmWjLjkD
</span></span></span><span style=display:flex><span><span style=color:#0a3069>87WMiTgtKybsmMLb2yCGSgLSArlSWhbMA0MaZSzAwE9PJKCCMvTANo5644zc8jBe
</span></span></span><span style=display:flex><span><span style=color:#0a3069>NQIDAQAB
</span></span></span><span style=display:flex><span><span style=color:#0a3069>-----END PUBLIC KEY-----&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/cvmfs/keys/ardc.edu.au/neurodesk.ardc.edu.au.pub
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_server add-replica -o <span style=color:#953800>$USER</span> http://stratum0.neurodesk.cloud.edu.au/cvmfs/neurodesk.ardc.edu.au /etc/cvmfs/keys/ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># CVMFS will store everything in /srv/cvmfs so make sure there is enough space or create a symlink to a bigger storage volume</span>
</span></span><span style=display:flex><span><span style=color:#57606a># e.g.:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cd /storage</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#sudo mkdir -p cvmfs-storage/srv/</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#cd /srv/</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#sudo mv cvmfs/ /storage/cvmfs-storage/srv/</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#sudo ln -s /storage/cvmfs-storage/srv/cvmfs/ --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_server snapshot neurodesk.ardc.edu.au
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#If this keeps failing with errors like &#34;Processing chunks [21605 registered chunks]: failed to download #http://stratum0.neurodesk.cloud.edu.au/cvmfs/neurodesk.ardc.edu.au/data/03/99e1faa88d0d66a8707cdecdc9b063cc527e50 (17 - host data transfer cut short)</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#couldn&#39;t reach Stratum 0 - please check the network connection</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#terminate called after throwing an instance of &#39;ECvmfsException&#39;</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#  what():  PANIC: /home/sftnight/jenkins/workspace/CvmfsFullBuildDocker/CVMFS_BUILD_ARCH/docker-x86_64/CVMFS_BUILD_PLATFORM/cc9/build/BUILD/cvmfs-2.13.0/cvmfs/swissknife_pull.cc : 286</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#Download error</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#Aborted (core dumped)&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#Then this is a deep packet inspection issue on the side of the stratum 1. To get around this, create an SSH tunnel to the stratum 0 server and transfer via that tunnel:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#ssh -L 8081:localhost:80 ec2-user@stratum0.neurodesk.cloud.edu.au</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#sudo vi /etc/cvmfs/repositories.d/neurodesk.ardc.edu.au/server.conf</span>
</span></span><span style=display:flex><span><span style=color:#57606a># change this:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#CVMFS_STRATUM0=http://stratum0.neurodesk.cloud.edu.au/cvmfs/neurodesk.ardc.edu.au</span>
</span></span><span style=display:flex><span><span style=color:#57606a># to this:</span>
</span></span><span style=display:flex><span><span style=color:#57606a>#CVMFS_STRATUM0=http://localhost:8081/cvmfs/neurodesk.ardc.edu.au</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Then run the sync again</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;/var/log/cvmfs/*.log {
</span></span></span><span style=display:flex><span><span style=color:#0a3069>    weekly
</span></span></span><span style=display:flex><span><span style=color:#0a3069>    missingok
</span></span></span><span style=display:flex><span><span style=color:#0a3069>    notifempty
</span></span></span><span style=display:flex><span><span style=color:#0a3069>}&#34;</span> <span style=color:#1f2328>|</span> sudo tee /etc/logrotate.d/cvmfs
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#39;*/5 * * * * root output=$(/usr/bin/cvmfs_server snapshot -a -i 2&gt;&amp;1) || echo &#34;$output&#34; &#39;</span> <span style=color:#1f2328>|</span> sudo tee /etc/cron.d/cvmfs_stratum1_snapshot
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo yum install iptables
</span></span><span style=display:flex><span>sudo iptables -t nat -A PREROUTING -p tcp -m tcp --dport <span style=color:#0550ae>80</span> -j REDIRECT --to-ports <span style=color:#0550ae>8000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo systemctl disable firewalld 
</span></span><span style=display:flex><span>sudo systemctl stop firewalld 
</span></span><span style=display:flex><span><span style=color:#57606a># make sure that port 80 is open in the real firewall</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo cvmfs_server update-geodb
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a>#test</span>
</span></span><span style=display:flex><span>curl --head http://YOUR_IP_OR_DNS/cvmfs/neurodesk.ardc.edu.au/.cvmfspublished</span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-669e1a928395f271b6b3631700262b49>6 - Project Roadmap</h1><div class=lead>This page lists ideas we have planned for Neurodesk - If any of these things sound exciting to you, get in touch and we help you to become a contributor.</div><p>All things we are currently working on and are planning to do are listed here: <a href=https://github.com/orgs/NeuroDesk/projects/9/views/4 target=_blank rel=noopener>https://github.com/orgs/NeuroDesk/projects/9/views/4</a></p><p>The larger themes and subthemes are:</p><h1 id=streamlining-container-build-and-release-process>Streamlining container build and release process</h1><h2 id=improving-the-workflow-of-how-users-can-add-new-applications-to-neurodesk>Improving the workflow of how users can add new applications to Neurodesk</h2><p>Adding new applications to Neurodesk requires multiple steps and back-and-forth between contributors and maintainers. We are aiming to simplify this process by developing an interactive workflow based on our current interactive container builder and the existing github workflows.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/127 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/127</a></li></ul><h2 id=standardizing-the-container-deployment>Standardizing the container deployment</h2><p>Currently, deploying the application containers happens through a connection of various custom scripts distributed across various repositories (apps.json in neurocommand repository, neurocontainers, transparent singularity).
We would like to adopt community standard tools, like SHPC, that can perform some of these tasks. The goal is to remove duplication of effort and maintenance.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/transparent-singularity/issues/7 target=_blank rel=noopener>https://github.com/NeuroDesk/transparent-singularity/issues/7</a></li><li><a href=https://github.com/NeuroDesk/neurocommand/issues/152 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/issues/152</a></li><li><a href=https://github.com/NeuroDesk/transparent-singularity/issues/8 target=_blank rel=noopener>https://github.com/NeuroDesk/transparent-singularity/issues/8</a></li><li><a href=https://github.com/NeuroDesk/neurocommand/issues/187 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/issues/187</a></li><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/504 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/504</a></li></ul><h2 id=reuse-and-citability-of-containers>Reuse and citability of containers</h2><p>Currently, there is no good way of describing and citing the individual software containers. We want to increase the reusability and citability of the software containers.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/218 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/218</a></li><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/217 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/217</a></li><li><a href=https://github.com/NeuroDesk/neurocontainers/issues/142 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocontainers/issues/142</a></li><li><a href=https://github.com/NeuroDesk/neurocommand/issues/212 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/issues/212</a></li></ul><h1 id=improving-user-experience>Improving user experience</h1><h2 id=improving-documentation>Improving documentation</h2><p>We would love to have more tutorials and examples that help people perform Neuroimaging analyses in Neurodesk. When we developed our current documentation system (<a href=https://neurodesk.org/tutorials-examples/%29 target=_blank rel=noopener>https://neurodesk.org/tutorials-examples/)</a>, we wanted to develop an interactive documentation system that ensures that examples always work correctly because they are automatically tested. We have a first proof-of-concept that runs jupyter notebooks and converts them to a website: <a href=https://neurodesk.org/example-notebooks/intro.html target=_blank rel=noopener>https://neurodesk.org/example-notebooks/intro.html</a> - but currently errors are not flagged automatically and it needs manual checking.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurodesk.github.io/issues/54 target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/issues/54</a></li><li><a href=https://github.com/NeuroDesk/neurodesk.github.io/issues/373 target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/issues/373</a></li><li><a href=https://github.com/NeuroDesk/neurodesk.github.io/issues/37 target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesk.github.io/issues/37</a></li></ul><h2 id=facilitating-the-use-of-neurodesk-in-teaching-and-workshops>Facilitating the use of Neurodesk in teaching and workshops</h2><p>Neurodesk is a great fit for teaching Neuroimaging methods. Currently, however, it&rsquo;s not easy to run a custom Neurodesk instance for a larger group. We would like to make it easier for users to deploy Neurodesk for classes and workshops with a shared data storage location and we would love to support advanced features for cost saving (e.g. autoscaling, support of ARM processors) on various cloud providers (e.g. Google Cloud, Amazon, Azure, OpenStack, OpenShift).</p><h1 id=support-of-advanced-workflows>Support of advanced workflows</h1><h2 id=deeper-integration-of-containers-and-jupyter-notebook-system>Deeper Integration of containers and jupyter notebook system</h2><p>We want to integrate the software containers deeper into the jupyter notebook system. Ideally, it is possible to use a jupyter kernel from within a software container.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurocommand/issues/175 target=_blank rel=noopener>https://github.com/NeuroDesk/neurocommand/issues/175</a></li></ul><h2 id=support-of-scheduling-workflows>Support of scheduling workflows</h2><p>Currently, all Neurodesk work is entirely interactive. We want to add a way of scheduling workflows and jobs so that larger computations can be managed efficiently.</p><p>Some issues in this theme are:</p><ul><li><a href=https://github.com/NeuroDesk/neurodesktop/issues/97 target=_blank rel=noopener>https://github.com/NeuroDesk/neurodesktop/issues/97</a></li></ul></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Mastodon aria-label=Mastodon><a target=_blank rel=noopener href=https://masto.ai/@Neurodesk aria-label=Mastodon><i class="fab fa-mastodon responsive-icon"></i>&nbsp;&nbsp;Mastodon</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://github.com/orgs/NeuroDesk/discussions aria-label=Discussion><i class="fa fa-envelope responsive-icon"></i>&nbsp;&nbsp;Discussion</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Acknowledgements aria-label=Acknowledgements><a target=_blank rel=noopener href=https://neurodesk.github.io/pr-621/overview/acknowledgement/ aria-label=Acknowledgements><i class="fa fa-handshake responsive-icon"></i>&nbsp;&nbsp;Acknowledgements</a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Metrics aria-label=Metrics><a target=_blank rel=noopener href=https://neurodesk.github.io/pr-621/docs/overview/metrics aria-label=Metrics><i class="fa fa-signal responsive-icon"></i>&nbsp;&nbsp;Metrics</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Uptime aria-label=Uptime><a target=_blank rel=noopener href=https://stats.uptimerobot.com/NBE38IZWZM aria-label=Uptime><i class="fa fa-circle responsive-icon"></i>&nbsp;&nbsp;Uptime</a></li></ul></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://neurodesk.github.io/pr-621/js/main.js></script><script defer src=https://neurodesk.github.io/pr-621/js/click-to-copy.js crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.8.2 integrity="sha512-lsD+XVzdBI6ZquXc8gqbw0/bgrfIsMJwY/8xvmvbN+U3gZSeG7BXQoCq4zv/yCmntR2GLHtgB+bD4ESPsKIbIA==" crossorigin=anonymous></script><script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"P5JEPQ5LZ2",apiKey:"56c6d9a954f7df2a98dcedb2763af8c4",indexName:"neurodesk"})</script><script src=https://neurodesk.github.io/pr-621/js/tabpane-persist.js></script></body></html>