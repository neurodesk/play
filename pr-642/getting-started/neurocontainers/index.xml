<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Neurocontainers on Neurodesk</title><link>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/</link><description>Recent content in Neurocontainers on Neurodesk</description><generator>Hugo</generator><language>en</language><atom:link href="https://neurodesk.github.io/pr-642/getting-started/neurocontainers/index.xml" rel="self" type="application/rss+xml"/><item><title>CVMFS</title><link>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/cvmfs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/cvmfs/</guid><description>&lt;h2 id="install-the-cernvm-file-system-cvmfs">Install the CernVM File System (CVMFS)&lt;/h2>
&lt;p>To begin, install CVMFS. Follow the official instructions here: &lt;a href="https://cvmfs.readthedocs.io/en/stable/cpt-quickstart.html#getting-the-software" target="_blank" rel="noopener">https://cvmfs.readthedocs.io/en/stable/cpt-quickstart.html#getting-the-software&lt;/a>&lt;/p>
&lt;p>An example installation for Ubuntu in Windows Subsystem for Linux (WSL) would look like this:&lt;/p>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt-get install lsb-release
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget https://ecsft.cern.ch/dist/cvmfs/cvmfs-release/cvmfs-release-latest_all.deb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo dpkg -i cvmfs-release-latest_all.deb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm -f cvmfs-release-latest_all.deb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get install build-essential
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt-get install cvmfs&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;p>Ubuntu 24.04 might have an issue with this, so try installing dependies manually:&lt;/p>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-fallback" data-lang="fallback">&lt;span style="display:flex;">&lt;span>sudo apt install libattr1=1:2.5.2-1build1 libuuid1=2.39.3-9ubuntu6&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h2 id="configure-cvmfs">Configure CVMFS&lt;/h2>
&lt;p>Once installed create the keys and configure the servers used:&lt;/p></description></item><item><title>DataLad</title><link>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/datalad/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/datalad/</guid><description>&lt;h1 id="using-neurodesk-containers-with-datalad">Using Neurodesk Containers with DataLad&lt;/h1>
&lt;p>This page explains how to use &lt;a href="https://www.datalad.org/" target="_blank" rel="noopener">DataLad&lt;/a> and the &lt;a href="https://github.com/ReproNim/containers" target="_blank" rel="noopener">ReproNim containers&lt;/a> with Neurodesk tools.&lt;/p>
&lt;h2 id="install-datalad-datalad-container-and-the-repronim-containers-repository">Install DataLad, datalad-container, and the ReproNim containers repository&lt;/h2>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>conda install datalad
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>pip install datalad_container
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>datalad install https://github.com/ReproNim/containers.git
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">cd&lt;/span> containers&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h2 id="list-all-default-available-containers">List all default available containers&lt;/h2>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>datalad containers-list&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h2 id="download-and-run-the-latest-container-version">Download and run the latest container version&lt;/h2>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>datalad containers-run -n neurodesk-romeo&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h2 id="change-version-of-container">Change version of container&lt;/h2>
&lt;p>You can change which version of a container is used in two ways:&lt;/p></description></item><item><title>Docker</title><link>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/docker/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/docker/</guid><description>&lt;p>Our containers are automatically built in &lt;a href="https://github.com/neurodesk/neurocontainers/" target="_blank" rel="noopener">https://github.com/neurodesk/neurocontainers/&lt;/a> and hosted on &lt;a href="https://hub.docker.com/u/vnmd" target="_blank" rel="noopener">dockerhub&lt;/a> and on &lt;a href="https://github.com/neurodesk/neurocontainers/packages" target="_blank" rel="noopener">github&lt;/a>&lt;/p>
&lt;h2 id="pull-docker-containers">Pull Docker containers&lt;/h2>
&lt;p>e.g. for a julia container
docker&lt;/p>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>docker pull vnmd/julia_1.6.1&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;p>You an also build singularity images from dockerhub&lt;/p>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>singularity build julia_1.6.1.simg docker://vnmd/julia_1.6.1&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;p>Replace &lt;code>julia_1.6.1&lt;/code> with your selected application. You can find the available containers here: &lt;a href="https://neurodesk.org/applications/" target="_blank" rel="noopener">https://neurodesk.org/applications/&lt;/a>&lt;/p></description></item><item><title>Open Recon</title><link>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/openrecon/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/openrecon/</guid><description>&lt;p>These instructions were tested on GitHub Codespaces, and we recommend this as a starting point.&lt;/p>
&lt;p>For a local setup you need Docker (&lt;a href="https://www.docker.com/%29" target="_blank" rel="noopener">https://www.docker.com/)&lt;/a>, Python3 and you need to install neurodocker and add it to your path:&lt;/p>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span style="display:flex;">&lt;span>python &lt;span style="color:#0550ae">-&lt;/span>m pip install neurodocker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#57606a">#check if neurodocker is already on the path:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>which neurodocker
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#57606a"># if not:&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#57606a">#the path depends on your local setup&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cf222e">export&lt;/span> PATH&lt;span style="color:#0550ae">=$&lt;/span>PATH&lt;span style="color:#1f2328">:&lt;/span>&lt;span style="color:#0550ae">~/.&lt;/span>local&lt;span style="color:#0550ae">/&lt;/span>lib&lt;span style="color:#0550ae">/&lt;/span>python3&lt;span style="color:#0550ae">.&lt;/span>&lt;span style="color:#0550ae">12&lt;/span>&lt;span style="color:#0550ae">/&lt;/span>site&lt;span style="color:#0550ae">-&lt;/span>packages&lt;span style="color:#0550ae">/&lt;/span>bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#cf222e">export&lt;/span> PATH&lt;span style="color:#0550ae">=$&lt;/span>PATH&lt;span style="color:#1f2328">:&lt;/span>&lt;span style="color:#0550ae">~/.&lt;/span>local&lt;span style="color:#0550ae">/&lt;/span>bin&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h2 id="1-add-the-installation-of-the-python-mrd-server-to-any-recipe-in-httpsgithubcomneurodeskneurocontainers">1) add the installation of the Python MRD server to any recipe in &lt;a href="https://github.com/neurodesk/neurocontainers/tree/main/recipes" target="_blank" rel="noopener">https://github.com/neurodesk/neurocontainers&lt;/a>&lt;/h2>
&lt;p>Make sure to adjust invertcontrast.py to your pipeline needs (or replace/rename other files from the &lt;a href="https://github.com/kspaceKelvin/python-ismrmrd-server" target="_blank" rel="noopener">Python MRD server&lt;/a>:&lt;/p></description></item><item><title>Singularity</title><link>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/singularity/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/singularity/</guid><description>&lt;p>Our docker containers are converted to singularity containers and stored on Object storage.&lt;/p>
&lt;h2 id="download-singularity-containers">Download Singularity Containers&lt;/h2>
&lt;p>First get an overview of which containers are available as Singularity containers:
&lt;a href="https://github.com/neurodesk/neurocommand/blob/main/cvmfs/log.txt" target="_blank" rel="noopener">https://github.com/neurodesk/neurocommand/blob/main/cvmfs/log.txt&lt;/a>&lt;/p>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl -s https://raw.githubusercontent.com/neurodesk/neurocommand/main/cvmfs/log.txt&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;p>assign the container name to a variable:&lt;/p>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">export&lt;/span> &lt;span style="color:#953800">container&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>itksnap_3.8.0_20201208&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;p>Then download the containers. One way is to use CURL:&lt;/p>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>curl -X GET https://neurocontainers.neurodesk.org/&lt;span style="color:#953800">$container&lt;/span>.simg -O&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h2 id="singularity-containers-and-gpus">Singularity Containers and GPUs&lt;/h2>
&lt;p>Some of our containers contain GPU-accelerated applications. Here is an example that tests the GPU accelerated program eddy in FSL:&lt;/p></description></item><item><title>Windows 11 and Windows Subsystem for Linux</title><link>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/windows11-wsl/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://neurodesk.github.io/pr-642/getting-started/neurocontainers/windows11-wsl/</guid><description>&lt;h2 id="1-install-wsl">1. Install WSL&lt;/h2>
&lt;p>Follow the instructions to enable Windows Subsystem for Linux 2 in Windows 11: &lt;a href="https://docs.microsoft.com/en-us/windows/wsl/install" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/windows/wsl/install&lt;/a>&lt;/p>
&lt;h2 id="2-configure-cvmfs-singularity-and-lmod-only-needs-to-be-done-once">2. Configure CVMFS, Singularity and LMOD (only needs to be done once)&lt;/h2>
&lt;h3 id="install-build-tools">Install build tools&lt;/h3>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>sudo apt update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install make gcc&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h3 id="install-singularity">Install singularity&lt;/h3>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">export&lt;/span> &lt;span style="color:#953800">SINGULARITY_VERSION&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>3.9.3 &lt;span style="color:#953800">VERSION&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>1.17.2 &lt;span style="color:#953800">OS&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>linux &lt;span style="color:#953800">ARCH&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>amd64
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget -q https://dl.google.com/go/go&lt;span style="color:#953800">$VERSION&lt;/span>.&lt;span style="color:#953800">$OS&lt;/span>-&lt;span style="color:#953800">$ARCH&lt;/span>.tar.gz 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo tar -C /usr/local -xzvf go&lt;span style="color:#953800">$VERSION&lt;/span>.&lt;span style="color:#953800">$OS&lt;/span>-&lt;span style="color:#953800">$ARCH&lt;/span>.tar.gz 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>rm go&lt;span style="color:#953800">$VERSION&lt;/span>.&lt;span style="color:#953800">$OS&lt;/span>-&lt;span style="color:#953800">$ARCH&lt;/span>.tar.gz 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">export&lt;/span> &lt;span style="color:#953800">GOPATH&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">HOME&lt;/span>&lt;span style="color:#0a3069">}&lt;/span>/go 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">export&lt;/span> &lt;span style="color:#953800">PATH&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>/usr/local/go/bin:&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">PATH&lt;/span>&lt;span style="color:#0a3069">}&lt;/span>:&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">GOPATH&lt;/span>&lt;span style="color:#0a3069">}&lt;/span>/bin 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir -p &lt;span style="color:#953800">$GOPATH&lt;/span>/src/github.com/sylabs 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">cd&lt;/span> &lt;span style="color:#953800">$GOPATH&lt;/span>/src/github.com/sylabs 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>wget -q https://github.com/sylabs/singularity/releases/download/v&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">SINGULARITY_VERSION&lt;/span>&lt;span style="color:#0a3069">}&lt;/span>/singularity-ce-&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">SINGULARITY_VERSION&lt;/span>&lt;span style="color:#0a3069">}&lt;/span>.tar.gz 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>tar -xzvf singularity-ce-&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">SINGULARITY_VERSION&lt;/span>&lt;span style="color:#0a3069">}&lt;/span>.tar.gz 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">cd&lt;/span> singularity-ce-&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">SINGULARITY_VERSION&lt;/span>&lt;span style="color:#0a3069">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>./mconfig --prefix&lt;span style="color:#0550ae">=&lt;/span>/usr/local/singularity 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>make -C builddir 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo make -C builddir install 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">cd&lt;/span> .. 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo rm -rf singularity-ce-&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">SINGULARITY_VERSION&lt;/span>&lt;span style="color:#0a3069">}&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo rm -rf /usr/local/go &lt;span style="color:#953800">$GOPATH&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h3 id="setup-bindpaths-for-singularity-eg-in-bashrc">Setup Bindpaths for Singularity (e.g. in .bashrc)&lt;/h3>



&lt;div class="highlight">
 &lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-bash" data-lang="bash">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">export&lt;/span> &lt;span style="color:#953800">PATH&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>&lt;span style="color:#0a3069">&amp;#34;/usr/local/singularity/bin:&lt;/span>&lt;span style="color:#0a3069">${&lt;/span>&lt;span style="color:#953800">PATH&lt;/span>&lt;span style="color:#0a3069">}&lt;/span>&lt;span style="color:#0a3069">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#6639ba">export&lt;/span> &lt;span style="color:#953800">SINGULARITY_BINDPATH&lt;/span>&lt;span style="color:#0550ae">=&lt;/span>&lt;span style="color:#0a3069">&amp;#39;/cvmfs,/mnt,/home&amp;#39;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>&lt;h3 id="cvmfs">CVMFS&lt;/h3>
&lt;p>Follow the instructions here: &lt;a href="https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/" target="_blank" rel="noopener">https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/&lt;/a>&lt;/p></description></item></channel></rss>