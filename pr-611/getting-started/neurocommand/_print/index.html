<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=canonical type=text/html href=https://neurodesk.org/pr-611/getting-started/neurocommand/><link rel=alternate type=application/rss+xml href=https://neurodesk.org/pr-611/getting-started/neurocommand/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=https://neurodesk.org/pr-611/static/favicons/favicon.ico><link rel=apple-touch-icon href=https://neurodesk.org/pr-611/static/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=https://neurodesk.org/pr-611/static/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=https://neurodesk.org/pr-611/static/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://neurodesk.org/pr-611/static/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=https://neurodesk.org/pr-611/static/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=https://neurodesk.org/pr-611/static/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=https://neurodesk.org/pr-611/static/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=https://neurodesk.org/pr-611/static/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=https://neurodesk.org/pr-611/static/favicons/android-192x192.png sizes=192x192><title>Neurocommand | Neurodesk</title>
<meta name=description content="For more advanced users who prefer a command-line interface"><meta property="og:url" content="https://neurodesk.org/pr-611/getting-started/neurocommand/"><meta property="og:site_name" content="Neurodesk"><meta property="og:title" content="Neurocommand"><meta property="og:description" content="For more advanced users who prefer a command-line interface"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta itemprop=name content="Neurocommand"><meta itemprop=description content="For more advanced users who prefer a command-line interface"><meta itemprop=dateModified content="2025-08-08T16:35:13+10:00"><meta itemprop=wordCount content="12"><meta name=twitter:card content="summary"><meta name=twitter:title content="Neurocommand"><meta name=twitter:description content="For more advanced users who prefer a command-line interface"><link href=https://neurodesk.org/pr-611/scss/main.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.8.2 integrity="sha512-l7pkV1dOURFyHCeH8I4fK9lCkQKuqhlsTCqRl3zktifDlB8oTUJ+mJPgYkK9kHpUut8j1iPquTv32t6hvTPv3g==" crossorigin=anonymous></head><body class=td-section><header><nav class="td-navbar navbar-expand-xl navbar-dark bg-dark"><div class="container-fluid flex-md-row"><a class=navbar-brand href=https://neurodesk.org/pr-611/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" viewBox="0 0 560.3 82.7"><defs><style>.st0{isolation:isolate}.st1{fill:#6ba442}.st2{fill:#fff}</style></defs><g class="st0"><path class="st2" d="M30.2 73.4h-9.9v-60h9.8l33.3 44.8V13.4h10.1v60H63.4L30.1 29.1v44.3z"/><path class="st2" d="M85.8 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4H95.6v13.5H129l1.8 11.6h-45v-60z"/><path class="st2" d="M141.4 13.4h9.9v50.2h28.2V13.4h9.9v51.4c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.8 1.8-1.1.4-2.2.7-3.3.7h-30.7c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7s-.7-2.2-.7-3.3V13.4z"/><path class="st2" d="M244.7 34.8c0 4.6-1.4 7.9-4.3 10-4 2.9-8.4 4.4-13.2 4.4l17.5 24.3h-12.1l-14.7-24h-9.5v24h-8.5V13.4h29.8c10 0 15 4.9 15 14.6v6.8zm-36.3 6h15.2c3.9-.2 6.6-.7 8-1.6 2.6-1.8 3.9-2.9 3.9-3.5V29c0-2.2-.6-3.9-1.7-5-1.4-1.4-3-2.1-4.7-2.1h-20.8v18.9z"/><path class="st2" d="M306.5 59.4c0 4.8-.3 7.7-.6 8.7-.3.9-.9 1.8-1.8 2.8s-1.7 1.3-3.1 1.8c-1.3.5-3.6.7-6.8.7h-27.1c-1.2.0-2.8-.2-5-.6-2.5-.5-3.9-1.1-4.4-1.8-.9-1.5-1.6-2.4-1.8-2.7-.4-.6-.7-3.6-.7-8.7V42.1c0-8.8.0-14.1.2-15.9.0-2.6.3-5 .7-7.4.1-.8.7-1.7 1.7-2.7.6-.7 2.1-1.3 4.4-1.8 1.9-.4 3.5-.7 5-.7h27.1c3.5.0 5.7.1 6.8.6 1.3.5 2.3 1.1 3.1 1.9.9.8 1.5 1.7 2 2.7.4.8.6 3.3.6 7.4l.2 16.7c0 8.1-.1 13.6-.3 16.7zM265.4 23.3v40h31.2v-40h-31.2z"/></g><g class="st0"><path class="st1" d="M316.2 73.4v-60l31.3.3c2.5.0 5.4.6 8.7 1.9 2.6 1 4.8 2.4 6.6 4.3 2 2 3.4 4.2 4.3 6.6 1 3 1.5 5.9 1.5 8.7v17.3c0 3.2-.5 6.1-1.5 8.7s-2.4 4.8-4.2 6.6-4 3.2-6.6 4.2-5.5 1.5-8.7 1.5h-31.3zm30.7-11.2c4.9.0 8-.7 9.2-2 2.1-2.3 3.2-5.8 3.2-10.4v-14c.2-1.9-.2-3.6-1.1-5.2-.8-1.5-1.8-2.8-2.9-3.9-1.1-1.1-2.4-1.9-3.9-2.4-1.5-.6-3-.8-4.4-.8h-21.3v38.8h21.2z"/><path class="st1" d="M381 13.4h45l-1.4 10.3-33.8-.2v13.6l20.1-.2v11.4h-20.1v13.5h33.4l1.8 11.6h-45v-60z"/><path class="st1" d="M446.4 46.5c-1.1.0-2.2-.3-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3V22.1c0-1.2.2-2.3.7-3.3s1.1-2 1.8-2.7 1.7-1.4 2.8-1.8 2.2-.7 3.3-.7h29.1c1.2.0 2.3.2 3.3.7s1.9 1.1 2.7 1.8c1.1 1 1.7 2 1.8 2.8l.7 3.3v6.7l-9 2.7v-7.7h-28.7v14.3l29.1.5c1.2.0 2.3.3 3.3.7 1.1.4 2 1.1 2.8 1.8.8.8 1.4 1.7 1.8 2.7.4 1 .7 2.2.7 3.3V65c0 1.2-.2 2.3-.7 3.3-.4 1-1.1 2-1.8 2.7-.8.8-1.7 1.4-2.7 1.8-1 .4-2.1.7-3.3.7h-30c-1.2.0-2.3-.2-3.3-.7-1.1-.4-2-1.1-2.8-1.8-.8-.8-1.4-1.7-1.8-2.7-.4-1-.7-2.2-.7-3.3v-7.7l9.5-1.6v7.7h28.7V47.2l-28.7-.5z"/><path class="st1" d="M505.4 13.4v23.9l26.2-23.9h12.9l-30.8 27.4 32.1 32.6h-12.9l-27.5-28.1v28.1h-10.6v-60h10.6z"/></g></svg></span></a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse" id=main_navbar><ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/pr-611/overview/><span>Overview</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class="nav-link active" href=https://neurodesk.org/pr-611/getting-started/><span class=active>Getting Started</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/pr-611/tutorials-examples/><span>Tutorials & Examples</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/pr-611/developers/><span>Developer Documentation</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://github.com/NeuroDesk target=_blank><span>GitHub</span></a></li><li class="nav-item ml-4 mb-2 mb-lg-0"><a class=nav-link href=https://neurodesk.org/pr-611/contact/><span>Contact</span></a></li></ul><div class="navbar-nav d-lg-block"><div class=td-search><div class=td-search--algolia id=docsearch-0></div></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=https://neurodesk.org/pr-611/getting-started/neurocommand/>Return to the regular view of this page</a>.</p></div><h1 class=title>Neurocommand</h1><div class=lead>For more advanced users who prefer a command-line interface</div><ul><li>1: <a href=#pg-6987a8204c89de50b7b62218a9346804>Linux and HPC</a></li><li>2: <a href=#pg-2848cfc675dcf08317b0e0a4a44ba198>Windows</a></li><li>3: <a href=#pg-6f6d6eb96124ff36a4032864b85d7fcd>Visual Studio Code</a></li></ul><div class=content><p>Neurocommand requires a Linux host machine, virtual machine or WSL for Windows.</p></div></div><div class=td-content><h1 id=pg-6987a8204c89de50b7b62218a9346804>1 - Linux and HPC</h1><div class=lead>Install neurocommand on Linux, HPC</div><h2 id=ways-of-using-neurocommand-in-linux-and-hpc>Ways of using Neurocommand in Linux and HPC:</h2><ol><li>You can use the module files for Neurocontainers directly via CVMFS: <a href=https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/ target=_blank rel=noopener>https://neurodesk.org/docs/getting-started/neurocontainers/cvmfs/</a></li><li>or you can install Neurocommand as described here:</li></ol><h2 id=requirements>Requirements:</h2><ul><li>python 3.6+ <a href=https://www.anaconda.com/docs/getting-started/miniconda/install#linux-terminal-installer target=_blank rel=noopener>https://www.anaconda.com/docs/getting-started/miniconda/install#linux-terminal-installer</a></li><li>singularity <a href=https://docs.sylabs.io/guides/3.5/user-guide/quick_start.html target=_blank rel=noopener>https://docs.sylabs.io/guides/3.5/user-guide/quick_start.html</a></li><li>git</li><li>lmod <a href=https://lmod.readthedocs.io/en/latest/ target=_blank rel=noopener>https://lmod.readthedocs.io/en/latest/</a></li></ul><div class="alert alert-info" role=alert><strong>On HPC</strong>, you will likely have lmod and Singularity already installed - check with your sysadmin</div><h2 id=setup-instructions>Setup Instructions:</h2><h3 id=install-command-line-eg-running-on-linux-or-hpc><strong>Install command line</strong> (e.g. running on Linux or HPC)</h3><ol><li>Load singularity
For optimal performance, ensure you are using Singularity version 3.x:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load singularity/3.5.0
</span></span><span style=display:flex><span><span style=color:#57606a>#or</span>
</span></span><span style=display:flex><span>module load singularity
</span></span><span style=display:flex><span><span style=color:#57606a>#or </span>
</span></span><span style=display:flex><span>module load apptainer</span></span></code></pre></div></div><p>If this doens&rsquo;t work it might already be loaded. Just run <code>singularity</code> and check.</p><ol start=2><li>Load aria2 (Optional)
To speed up container downloads, you can optionally install or load aria2c:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module load aria2c</span></span></code></pre></div></div><ol start=3><li>Clone and Set Up the Repository
Clone the repository into a directory with enough storage and ensure you are not using a symbolic link (to be sure run cd `pwd -P`). Itâ€™s recommended to perform this setup within a Python virtual environment (venv) or a Conda environment:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone https://github.com/NeuroDesk/neurocommand.git 
</span></span><span style=display:flex><span><span style=color:#6639ba>cd</span> neurocommand 
</span></span><span style=display:flex><span>pip3 install -r neurodesk/requirements.txt --user 
</span></span><span style=display:flex><span>bash build.sh --cli
</span></span><span style=display:flex><span>bash containers.sh
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>`</span><span style=color:#6639ba>pwd</span> -P<span style=color:#0a3069>`</span>
</span></span><span style=display:flex><span><span style=color:#57606a># OR, depending on your installation:</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>APPTAINER_BINDPATH</span><span style=color:#0550ae>=</span><span style=color:#0a3069>`</span><span style=color:#6639ba>pwd</span> -P<span style=color:#0a3069>`</span></span></span></code></pre></div></div><h3 id=install-containers><strong>Install Containers</strong></h3><ul><li>If these steps are successful, the help will be displayed</li><li>Install all or only specific containers by following the instructions, e.g.:</li></ul><ol><li>Search and Install Specific Containers
To search for containers that have &ldquo;itksnap&rdquo; in the name:</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash containers.sh itksnap</span></span></code></pre></div></div><ol start=2><li>Install a Specific Version
To install a specific version, (e.g., itksnap version 4.0.2 from 20240117):</li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>./local/fetch_containers.sh itksnap 4.0.2 <span style=color:#0550ae>20240117</span></span></span></code></pre></div></div><p>To install all containers with that name:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash containers.sh --itksnap</span></span></code></pre></div></div><p>To download all containers (be careful - there are a lot of containers!):</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash containers.sh --all</span></span></code></pre></div></div><h3 id=add-your-containers-to-lmod><strong>Add your containers to lmod</strong></h3><ul><li>To add each container to the module search path, run the following:</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module use <span style=color:#953800>$PWD</span>/local/containers/modules/</span></span></code></pre></div></div><ul><li>It may be a good idea to add this to your .bashrc if it works. When adding to your .bashrc you will need to replace $PWD to point to the correct path, i.e. the output of this</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>echo</span> <span style=color:#0a3069>&#34;module use </span><span style=color:#953800>$PWD</span><span style=color:#0a3069>/local/containers/modules/&#34;</span></span></span></code></pre></div></div><ul><li>It is very important to also set the SINGULARITY_BINDPATH or the APPTAINER_BINDPATH variable in your .bashrc. This variable must contain a comma-separated list of directories you want to access with the Neurodesk tools.</li></ul><p>e.g.:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>SINGULARITY_BINDPATH</span><span style=color:#0550ae>=</span>/scratch/,/data/
</span></span><span style=display:flex><span><span style=color:#57606a># OR, depending on your installation:</span>
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>APPTAINER_BINDPATH</span><span style=color:#0550ae>=</span>/scratch/,/data/
</span></span><span style=display:flex><span><span style=color:#57606a>#Note: User the correct line depending on your installation. Do not add a directory that does not exist, otherwise the containers will not start!</span></span></span></code></pre></div></div><ul><li>Run <code>ml avail</code> to see the installed containers at the top of the list (neurodesk containers will take preference over system modules with the same name), run:</li></ul><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>module --ignore_cache avail</span></span></code></pre></div></div><ul><li>Every time you start a new shell you need to run <code>module use PathToYourContainers</code> or add this command to you .bashrc file.</li></ul><div class="alert alert-info" role=alert><p><strong>GPU support</strong></p><p>Some of our containers contain GPU-accelerated applications. Here is an example that runs the GPU accelerated program eddy in FSL:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>module load fsl/6.0.5.1
</span></span><span style=display:flex><span><span style=color:#6639ba>export</span> <span style=color:#953800>neurodesk_singularity_opts</span><span style=color:#0550ae>=</span><span style=color:#0a3069>&#39;--nv&#39;</span>
</span></span><span style=display:flex><span>eddy_cuda9.1</span></span></code></pre></div></div></div><div class="alert alert-info" role=alert><p><strong>For Lxde desktops</strong></p><p><code>bash build.sh --lxde --edit</code></p></div><div class="alert alert-info" role=alert><p><strong>For Mate desktops</strong></p><p>Run <code>bash build.sh --init</code> (or <code>bash build.sh --lxde --edit</code>)<br>lxde/mate: Mate<br>installdir: Where all the neurocommand files will be stored (Default: ./local)<br>appmenu: The linux menu xml file. (Usually /etc/xdg/menus/****-applications.menu)<br>appdir: Location for the .desktop files for this linux desktop (Usually /usr/share/applications)<br>deskdir: Location for the .directory files for this linux desktop (Typically /usr/share/desktop-directories)</p></div><div class="alert alert-info" role=alert><p><strong>For desktop menus</strong></p><p><code>sudo bash install.sh</code> to install<br><em>Creates symlinks to menu files in installation dir</em></p><p><code>sudo bash uninstall.sh</code> to uninstall<br><em>Removes symlinks</em></p></div><div class="alert alert-info" role=alert><p><strong>For user-specific desktop menus in a shared Linux environment</strong></p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>mkdir -p $HOME/.config/menus
</span></span><span style=display:flex><span>mkdir -p $HOME/.local/share/applications
</span></span><span style=display:flex><span>mkdir -p $HOME/.local/share/desktop-directories
</span></span><span style=display:flex><span>ln -sfn /PATH_TO_YOUR_INSTALLATION/neurocommand/local/xfce-applications.menu $HOME/.config/menus
</span></span><span style=display:flex><span>ln -sfn /PATH_TO_YOUR_INSTALLATION/neurocommand/local/neurodesk-applications.menu $HOME/.config/menus
</span></span><span style=display:flex><span>ln -sfn /PATH_TO_YOUR_INSTALLATION/neurocommand/local/applications $HOME/.local/share/applications/neurodesk
</span></span><span style=display:flex><span>ln -sfn /PATH_TO_YOUR_INSTALLATION/neurocommand/local/desktop-directories $HOME/.local/share/desktop-directories/neurodesk</span></span></code></pre></div></div></div><h2 id=to-update>To update</h2><h3 id=1-update-the-neurocommand-repository>1. Update the Neurocommand Repository</h3><p>First, ensure your local repository is up to date by pulling the latest changes:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git pull</span></span></code></pre></div></div><p>Next, rebuild Neurocommand by running:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash build.sh</span></span></code></pre></div></div><h3 id=2-update-containers>2. Update Containers</h3><p>To update the containers, navigate to the neurodesktop directory and run:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash containers.sh</span></span></code></pre></div></div><h3 id=3-update-specific-modules>3. Update Specific Modules</h3><p>Choose the module you want to update for example you want to update mrtrix3/3.0.2 module with the eddy_cuda fix:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>~/neurocommand/local/fetch_containers.sh mrtrix3 3.0.2 <span style=color:#0550ae>20221108</span> mrview <span style=color:#953800>$@</span></span></span></code></pre></div></div><h1 id=examples-for-specific-hpcs>Examples for specific HPCs:</h1><h2 id=greatlakes---university-of-michigan>Greatlakes - University of Michigan</h2><h3 id=setup-on-a-desktop>Setup on a desktop</h3><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span>module <span style=color:#6639ba>load</span> singularity
</span></span><span style=display:flex><span><span style=color:#57606a># now change to a directory with enough storage, e.g. /nfs/turbo/username</span>
</span></span><span style=display:flex><span>git clone https<span style=color:#1f2328>:</span><span style=color:#0550ae>//</span>github<span style=color:#0550ae>.</span>com<span style=color:#0550ae>/</span>NeuroDesk<span style=color:#0550ae>/</span>neurocommand<span style=color:#0550ae>.</span>git 
</span></span><span style=display:flex><span>cd neurocommand 
</span></span><span style=display:flex><span>pip3 install <span style=color:#0550ae>-</span>r neurodesk<span style=color:#0550ae>/</span>requirements<span style=color:#0550ae>.</span>txt <span style=color:#0550ae>--</span>user 
</span></span><span style=display:flex><span>bash build<span style=color:#0550ae>.</span>sh <span style=color:#0550ae>--</span>cli
</span></span><span style=display:flex><span>bash containers<span style=color:#0550ae>.</span>sh
</span></span><span style=display:flex><span><span style=color:#cf222e>export</span> SINGULARITY_BINDPATH<span style=color:#0550ae>=</span><span style=color:#f6f8fa;background-color:#82071e>`</span>pwd <span style=color:#0550ae>-</span>P<span style=color:#f6f8fa;background-color:#82071e>`</span>
</span></span><span style=display:flex><span>bash containers<span style=color:#0550ae>.</span>sh itksnap
</span></span><span style=display:flex><span><span style=color:#57606a># now select a version of itksnap to install. For this copy and paste the installation</span>
</span></span><span style=display:flex><span>echo <span style=color:#0a3069>&#34;module load singularity&#34;</span> <span style=color:#0550ae>&gt;&gt;</span> <span style=color:#0550ae>~/.</span>bashrc
</span></span><span style=display:flex><span>echo <span style=color:#0a3069>&#34;module use $PWD/local/containers/modules/&#34;</span> <span style=color:#0550ae>&gt;&gt;</span> <span style=color:#0550ae>~/.</span>bashrc
</span></span><span style=display:flex><span>echo <span style=color:#0a3069>&#34;export SINGULARITY_BINDPATH=/nfs/,/scratch/&#34;</span> <span style=color:#0550ae>&gt;&gt;</span> <span style=color:#0550ae>~/.</span>bashrc</span></span></code></pre></div></div><h3 id=setup-on-with-a-jupyter-notebook>Setup on with a jupyter notebook</h3><p>Start new Jupyter notebook by entering &ldquo;load singularity&rdquo; in the Module Commands field:</p><p><img src=https://github.com/user-attachments/assets/8c54a2a5-57db-4e43-9504-5c4b5e1278c1 alt=image></p><p>Then run these commands:</p><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#0550ae>!</span>pip install jupyterlmod
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#57606a># Restart the kernel by clicking Kernel -&gt; Restart Kernel</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>import module
</span></span><span style=display:flex><span>await module<span style=color:#0550ae>.</span>load<span style=color:#1f2328>(</span><span style=color:#0a3069>&#39;niimath&#39;</span><span style=color:#1f2328>)</span></span></span></code></pre></div></div></div><div class=td-content style=page-break-before:always><h1 id=pg-2848cfc675dcf08317b0e0a4a44ba198>2 - Windows</h1><div class=lead>Install neurocommand on Windows</div><h2 id=wsl-w-ubuntu--lxde>WSL (w/ Ubuntu + LXDE)</h2><p>For more information on WSL: <a href=https://docs.microsoft.com/en-us/windows/wsl target=_blank rel=noopener>https://docs.microsoft.com/en-us/windows/wsl</a></p><h3 id=setting-up>Setting up</h3><ol><li>Setup WSL2 using the following instructions <em>(Ubuntu 18.04 recommended)</em><br><a href=https://docs.microsoft.com/en-us/windows/wsl/install-win10 target=_blank rel=noopener>https://docs.microsoft.com/en-us/windows/wsl/install-win10</a>
<em>Proceed until a Ubuntu bash shell is available from the Windows Host</em><br><em>Run the remaining commands in the Bash shell</em></li><li><code>sudo apt-get install lxde</code> to install LXDE desktop in WSL</li><li>Reboot</li><li><code>sudo apt-get install xrdp</code> to install XRDP in WSL</li><li>Open <code>/etc/xrdp/xrdp.ini</code>
Change <code>port=3389</code> to <code>port=3390</code> and save</li><li>Run <code>echo startlxde > ~/.xsession</code></li></ol><h3 id=running>Running</h3><ol><li><code>sudo service xrdp start</code> to start xrdp server</li><li>Open Microsoft Remote Desktop Connection in Windows host</li><li>Connect to <code>localhost:3390</code></li><li>In the next login page, leave Session as <code>Xorg</code>. Enter your WSL username and password and click <code>OK</code></li><li>This should open an LXDE Linux Desktop environment. Follow <a href=https://neurodesk.org/pr-611/docs/getting-started/neurocommand/linux>Linux guide</a> from here on</li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-6f6d6eb96124ff36a4032864b85d7fcd>3 - Visual Studio Code</h1><div class=lead>Guide connecting your VS Code environment to Neurodesktop</div><p>The following guide is for connecting to Neurodesktop using a VS Code installation running on your host machine.</p><blockquote><p>Please see additional instructions below if Neurodesktop is running remotely (i.e. Cloud, HPC, VM)</p></blockquote><h2 id=pre-requisites>Pre-requisites</h2><p>Visual Studio Code <em>(<a href=https://code.visualstudio.com target=_blank rel=noopener>https://code.visualstudio.com</a>)</em> installed on your host. Standalone version should work fine
Install the following VS Code extensions:</p><ul><li><input checked disabled type=checkbox> <a href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker" target=_blank rel=noopener>Docker extension</a> (Required)</li><li><input disabled type=checkbox> <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" target=_blank rel=noopener>Remote development extension pack</a>. Includes the following extensions<ul><li><input checked disabled type=checkbox> <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers" target=_blank rel=noopener>Remote - Containers</a> (Required)</li><li><input disabled type=checkbox> <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-wsl" target=_blank rel=noopener>Remote - WSL</a> (For windows hosts)</li></ul></li></ul><h2 id=connecting-to-neurodesktop>Connecting to Neurodesktop</h2><p>Open VS Code and open a Folder (File > Open Folder)</p><blockquote><p>This can be any folder (e.g. home or project folder). VS Code runs into errors if no folder is opened.</p></blockquote><p>Open the Command Palette (Ctrl+Shift+P).</p><p>Select <code>Remote-Containers: Attach to Running Container</code> from the dropdown panel</p><p>Start typing in &rsquo;neurodesktop. Select <code>/neurodesktop</code> from the list</p><p>This should open a VS Code Window connected to the neurodesktop as a Dev Container.</p><blockquote><p>This may take about a minute if it is the first time you are connecting, as VS code has to install the VS Code server onto the container. Repeat connections should be faster.</p></blockquote><h3 id=first-time-connection>First time connection</h3><blockquote><p>The first time connection will default to using neurodesktop root user. We want the default connection to be as the normal user to avoid permission issues.
To check which user is being used, open the terminal in the neurodesktop VS Code instance and check if the user is <code>user</code> or <code>root</code></p></blockquote><p>Follow the following steps to configure your VS Code instance to connect to neurodesktop as normal user by default:</p><ol><li><p>Open the Command Palette (Ctrl+Shift+P).</p></li><li><p>Select <code>Remote-Containers: Open Container Configuration File</code> from the dropdown panel</p></li><li><p>This will open a <code>neurodesktop%3alatest.json</code> file. Overwrite the file with the following contents</p></li></ol><div class=highlight><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#1f2328>{</span>
</span></span><span style=display:flex><span>	<span style=color:#0550ae>&#34;workspaceFolder&#34;</span><span style=color:#1f2328>:</span> <span style=color:#0a3069>&#34;/home/user&#34;</span><span style=color:#1f2328>,</span>
</span></span><span style=display:flex><span>	<span style=color:#0550ae>&#34;remoteUser&#34;</span><span style=color:#1f2328>:</span> <span style=color:#0a3069>&#34;jovyan&#34;</span>
</span></span><span style=display:flex><span><span style=color:#1f2328>}</span></span></span></code></pre></div></div><ol start=4><li>Close this VS Code window. Use steps in <a href=https://neurodesk.org/docs/getting-started/neurodesktop/visual-studio-code/#connecting-to-neurodesktop target=_blank rel=noopener>previous section</a> to connect normally</li></ol><h2 id=useful-additions>Useful Additions</h2><p>Plugins to view neuroimaging data inside VScode:
<img src=https://neurodesk.org/pr-611/static/docs/getting-started/neurocommand/niivue_vscode.png alt=niivue-vscode></p><p><img src=https://user-images.githubusercontent.com/4021595/163663250-4e8894c6-ea26-4224-b619-87f5485880c1.png alt=image></p></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Mastodon aria-label=Mastodon><a target=_blank rel=noopener href=https://masto.ai/@Neurodesk aria-label=Mastodon><i class="fab fa-mastodon responsive-icon"></i>&nbsp;&nbsp;Mastodon</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Discussion aria-label=Discussion><a target=_blank rel=noopener href=https://github.com/orgs/NeuroDesk/discussions aria-label=Discussion><i class="fa fa-envelope responsive-icon"></i>&nbsp;&nbsp;Discussion</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Acknowledgements aria-label=Acknowledgements><a target=_blank rel=noopener href=https://neurodesk.org/pr-611/overview/acknowledgement/ aria-label=Acknowledgements><i class="fa fa-handshake responsive-icon"></i>&nbsp;&nbsp;Acknowledgements</a></li></ul></div><div class="col-6 col-sm-4 text-end text-xs-center order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=Metrics aria-label=Metrics><a target=_blank rel=noopener href=https://neurodesk.org/pr-611/docs/overview/metrics aria-label=Metrics><i class="fa fa-signal responsive-icon"></i>&nbsp;&nbsp;Metrics</a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Uptime aria-label=Uptime><a target=_blank rel=noopener href=https://stats.uptimerobot.com/NBE38IZWZM aria-label=Uptime><i class="fa fa-circle responsive-icon"></i>&nbsp;&nbsp;Uptime</a></li></ul></div><div class="td-footer__copyright-etc col-12 col-sm-4 text-center py-2 order-sm-2"></div></div></div></footer></div><script src=https://neurodesk.org/pr-611/js/main.js></script><script defer src=https://neurodesk.org/pr-611/js/click-to-copy.js crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.8.2 integrity="sha512-lsD+XVzdBI6ZquXc8gqbw0/bgrfIsMJwY/8xvmvbN+U3gZSeG7BXQoCq4zv/yCmntR2GLHtgB+bD4ESPsKIbIA==" crossorigin=anonymous></script><script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"P5JEPQ5LZ2",apiKey:"56c6d9a954f7df2a98dcedb2763af8c4",indexName:"neurodesk"})</script><script src=https://neurodesk.org/pr-611/js/tabpane-persist.js></script></body></html>